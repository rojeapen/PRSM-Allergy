import{c as R,j as e,r,i as T,b as I,f as N,d as M,e as L,T as k,u as A,P as D}from"./auth-COtb7vVW.js";import{H as O}from"./header-BUGNByUh.js";R.createRoot(document.getElementById("root")).render(e.jsx(r.StrictMode,{children:e.jsx(H,{})}));class n{name;description;photoUrl;photoFile;photoId;id;constructor(l){this.name=l.name,this.description=l.description,this.photoUrl=l.photoUrl,this.photoFile=l.photoFile,this.photoId=l.photoId,this.id=l.id}}function H(){const[d,l]=r.useState(null),[c,h]=r.useState([]),[w,p]=r.useState(!1),[g,j]=r.useState(!1),[o,u]=r.useState(new n({name:"",description:""})),[f,b]=r.useState(null),[i,m]=r.useState(null);r.useEffect(()=>{T(t=>{}),I().then(t=>{const s=t.teamMembers.map((a,x)=>new n({name:a.name,description:a.description,photoUrl:a.photo.url,photoId:a.photo.id,id:x.toString()}));h(s),l(t)})},[]);const F=()=>{!o.name.trim()||!o.description.trim()||(h([...c,new n({...o})]),u(new n({name:"",description:""})),p(!0))},S=t=>{b(t),m(new n({...c[t]}))},v=(t,s)=>{i&&m(new n({...i,[t]:s}))},P=t=>{i&&m(new n({...i,photoFile:t}))},U=t=>{if(!i)return;const s=[...c];s[t]=new n({...i}),h(s),b(null),m(null),p(!0)},C=()=>{b(null),m(null)},E=t=>{h(c.filter((s,a)=>a!==t)),p(!0),f===t&&(b(null),m(null))},y=async()=>{if(!d)return;j(!0);const t=[];for(const s of c){let a=new N({url:s.photoUrl||"",id:s.photoId||""});s.photoUrl&&s.photoFile&&await M(a),s.photoFile&&(a=await L(s.photoFile,`Team Member ${s.name}`)),t.push(new k({name:s.name,description:s.description,photo:new N({url:a.url,id:a.id})}))}for(const s of d.teamMembers)t.find(x=>x.name===s.name)||await M(s.photo);d.teamMembers=t,await A(d),p(!1),j(!1),l(D.fromMap(d.toMap()))};return e.jsxs(e.Fragment,{children:[e.jsx(O,{isDashboardTeamPage:!0}),d?e.jsx(e.Fragment,{children:e.jsxs("section",{className:"dashboard-section light",children:[e.jsxs("div",{className:"section-title",children:[e.jsx("h1",{children:"Team Members"}),e.jsx("p",{children:"Manage team members shown on the main website."})]}),e.jsxs("div",{className:"team-dashboard-content",children:[e.jsxs("div",{className:"team-dashboard-list",children:[c.length===0&&e.jsx("div",{style:{textAlign:"center"},children:"No team members yet."}),c.map((t,s)=>e.jsx("div",{className:"team-dashboard-item",children:f===s?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"team-form-group",children:[e.jsx("label",{children:"Name:"}),e.jsx("input",{type:"text",className:"input-light",value:i?.name||"",onChange:a=>v("name",a.target.value)})]}),e.jsxs("div",{className:"team-form-group",children:[e.jsx("label",{children:"Description:"}),e.jsx("textarea",{className:"input-light",value:i?.description||"",onChange:a=>v("description",a.target.value)})]}),e.jsxs("div",{className:"team-form-group",children:[e.jsx("label",{children:"Photo:"}),e.jsx("input",{type:"file",className:"input-light",accept:"image/*",onChange:a=>{a.target.files&&a.target.files[0]&&P(a.target.files[0])}}),i?.photoUrl&&!i?.photoFile&&e.jsx("img",{src:i.photoUrl,alt:"Preview",className:"team-dashboard-thumbnail"}),i?.photoFile&&e.jsx("img",{src:URL.createObjectURL(i.photoFile),alt:"Preview",className:"team-dashboard-thumbnail"})]}),e.jsxs("div",{className:"team-dashboard-actions",children:[e.jsx("button",{className:"btn-primary",onClick:()=>U(s),children:"Save"}),e.jsx("button",{className:"btn-danger",onClick:C,children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"team-dashboard-item-preview",children:[e.jsx("img",{src:t.photoFile!=null?URL.createObjectURL(t.photoFile):t.photoUrl?t.photoUrl:"",alt:t.name,className:"team-dashboard-thumbnail"}),e.jsxs("div",{className:"team-dashboard-item-info",children:[e.jsx("h4",{children:t.name}),e.jsx("p",{children:t.description})]})]}),e.jsxs("div",{className:"team-dashboard-actions",children:[e.jsx("button",{className:"btn-primary",onClick:()=>S(s),children:"Edit"}),e.jsx("button",{className:"btn-danger",onClick:()=>E(s),children:"Delete"})]})]})},s))]}),e.jsxs("div",{className:"team-dashboard-add",children:[e.jsx("h3",{style:{margin:"0 0 1rem 0"},children:"Add New Team Member"}),e.jsxs("div",{className:"team-form-group",children:[e.jsx("label",{children:"Name:"}),e.jsx("input",{type:"text",className:"input-light",placeholder:"Team member name",value:o.name,onChange:t=>u(new n({...o,name:t.target.value}))})]}),e.jsxs("div",{className:"team-form-group",children:[e.jsx("label",{children:"Description:"}),e.jsx("textarea",{className:"input-light",placeholder:"Role or description",value:o.description,onChange:t=>u(new n({...o,description:t.target.value}))})]}),e.jsxs("div",{className:"team-form-group",children:[e.jsx("label",{children:"Photo:"}),e.jsx("input",{type:"file",className:"input-light",accept:"image/*",onChange:t=>{t.target.files&&t.target.files[0]&&u(new n({...o,photoFile:t.target.files[0]}))}}),o.photoFile&&e.jsx("img",{src:URL.createObjectURL(o.photoFile),alt:"Preview",className:"team-dashboard-thumbnail"})]}),e.jsx("button",{className:"btn-primary",onClick:F,children:"Add Team Member"})]}),w&&!g&&e.jsx("button",{className:"btn-primary",onClick:y,children:"Save Changes"}),g&&e.jsx("div",{className:"loader"})]})]})}):e.jsx("div",{className:"loader-container",children:e.jsx("div",{className:"loader"})})]})}
