import{_ as lt,C as ot,b as je,d as ct,e as dt,f as ut,h as Z,i as ht,k as Pe,p as mt,u as pt,m as gt,c as ft,j as e,r as m,A as S,n as bt,o as xt,q as vt,t as F,P as R,v as we,w as Ae,x as yt,S as St,y as Nt,z as jt}from"./auth-D2qu_tVY.js";import{H as wt}from"./header-CtgKSFoE.js";const At="type.googleapis.com/google.protobuf.Int64Value",kt="type.googleapis.com/google.protobuf.UInt64Value";function Ie(s,n){const i={};for(const a in s)s.hasOwnProperty(a)&&(i[a]=n(s[a]));return i}function H(s){if(s==null)return null;if(s instanceof Number&&(s=s.valueOf()),typeof s=="number"&&isFinite(s)||s===!0||s===!1||Object.prototype.toString.call(s)==="[object String]")return s;if(s instanceof Date)return s.toISOString();if(Array.isArray(s))return s.map(n=>H(n));if(typeof s=="function"||typeof s=="object")return Ie(s,n=>H(n));throw new Error("Data cannot be encoded in JSON: "+s)}function P(s){if(s==null)return s;if(s["@type"])switch(s["@type"]){case At:case kt:{const n=Number(s.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+s);return n}default:throw new Error("Data cannot be decoded from JSON: "+s)}return Array.isArray(s)?s.map(n=>P(n)):typeof s=="function"||typeof s=="object"?Ie(s,n=>P(n)):s}const ee="functions";const ke={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class v extends gt{constructor(n,i,a){super(`${ee}/${n}`,i||""),this.details=a,Object.setPrototypeOf(this,v.prototype)}}function Tt(s){if(s>=200&&s<300)return"ok";switch(s){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function B(s,n){let i=Tt(s),a=i,o;try{const u=n&&n.error;if(u){const d=u.status;if(typeof d=="string"){if(!ke[d])return new v("internal","internal");i=ke[d],a=d}const c=u.message;typeof c=="string"&&(a=c),o=u.details,o!==void 0&&(o=P(o))}}catch{}return i==="ok"?null:new v(i,a,o)}class Ct{constructor(n,i,a,o){this.app=n,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,ct(n)&&n.settings.appCheckToken&&(this.serverAppAppCheckToken=n.settings.appCheckToken),this.auth=i.getImmediate({optional:!0}),this.messaging=a.getImmediate({optional:!0}),this.auth||i.get().then(u=>this.auth=u,()=>{}),this.messaging||a.get().then(u=>this.messaging=u,()=>{}),this.appCheck||o?.get().then(u=>this.appCheck=u,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(n){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const i=n?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return i.error?null:i.token}return null}async getContext(n){const i=await this.getAuthToken(),a=await this.getMessagingToken(),o=await this.getAppCheckToken(n);return{authToken:i,messagingToken:a,appCheckToken:o}}}const Q="us-central1",Et=/^data: (.*?)(?:\n|$)/;function Pt(s){let n=null;return{promise:new Promise((i,a)=>{n=setTimeout(()=>{a(new v("deadline-exceeded","deadline-exceeded"))},s)}),cancel:()=>{n&&clearTimeout(n)}}}class It{constructor(n,i,a,o,u=Q,d=(...c)=>fetch(...c)){this.app=n,this.fetchImpl=d,this.emulatorOrigin=null,this.contextProvider=new Ct(n,i,a,o),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(u);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=Q}catch{this.customDomain=null,this.region=u}}_delete(){return this.deleteService()}_url(n){const i=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${i}/${this.region}/${n}`:this.customDomain!==null?`${this.customDomain}/${n}`:`https://${this.region}-${i}.cloudfunctions.net/${n}`}}function Dt(s,n,i){const a=Pe(n);s.emulatorOrigin=`http${a?"s":""}://${n}:${i}`,a&&(mt(s.emulatorOrigin+"/backends"),pt("Functions",!0))}function Lt(s,n,i){const a=o=>Rt(s,n,o,{});return a.stream=(o,u)=>Mt(s,n,o,u),a}function De(s){return s.emulatorOrigin&&Pe(s.emulatorOrigin)?"include":void 0}async function Ft(s,n,i,a,o){i["Content-Type"]="application/json";let u;try{u=await a(s,{method:"POST",body:JSON.stringify(n),headers:i,credentials:De(o)})}catch{return{status:0,json:null}}let d=null;try{d=await u.json()}catch{}return{status:u.status,json:d}}async function Le(s,n){const i={},a=await s.contextProvider.getContext(n.limitedUseAppCheckTokens);return a.authToken&&(i.Authorization="Bearer "+a.authToken),a.messagingToken&&(i["Firebase-Instance-ID-Token"]=a.messagingToken),a.appCheckToken!==null&&(i["X-Firebase-AppCheck"]=a.appCheckToken),i}function Rt(s,n,i,a){const o=s._url(n);return Ot(s,o,i,a)}async function Ot(s,n,i,a){i=H(i);const o={data:i},u=await Le(s,a),d=a.timeout||7e4,c=Pt(d),g=await Promise.race([Ft(n,o,u,s.fetchImpl,s),c.promise,s.cancelAllRequests]);if(c.cancel(),!g)throw new v("cancelled","Firebase Functions instance was deleted.");const f=B(g.status,g.json);if(f)throw f;if(!g.json)throw new v("internal","Response is not valid JSON object.");let p=g.json.data;if(typeof p>"u"&&(p=g.json.result),typeof p>"u")throw new v("internal","Response is missing data field.");return{data:P(p)}}function Mt(s,n,i,a){const o=s._url(n);return _t(s,o,i,a||{})}async function _t(s,n,i,a){i=H(i);const o={data:i},u=await Le(s,a);u["Content-Type"]="application/json",u.Accept="text/event-stream";let d;try{d=await s.fetchImpl(n,{method:"POST",body:JSON.stringify(o),headers:u,signal:a?.signal,credentials:De(s)})}catch(l){if(l instanceof Error&&l.name==="AbortError"){const w=new v("cancelled","Request was cancelled.");return{data:Promise.reject(w),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(w)}}}}}}const y=B(0,null);return{data:Promise.reject(y),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(y)}}}}}}let c,g;const f=new Promise((l,y)=>{c=l,g=y});a?.signal?.addEventListener("abort",()=>{const l=new v("cancelled","Request was cancelled.");g(l)});const p=d.body.getReader(),b=Ut(p,c,g,a?.signal);return{stream:{[Symbol.asyncIterator](){const l=b.getReader();return{async next(){const{value:y,done:w}=await l.read();return{value:y,done:w}},async return(){return await l.cancel(),{done:!0,value:void 0}}}}},data:f}}function Ut(s,n,i,a){const o=(d,c)=>{const g=d.match(Et);if(!g)return;const f=g[1];try{const p=JSON.parse(f);if("result"in p){n(P(p.result));return}if("message"in p){c.enqueue(P(p.message));return}if("error"in p){const b=B(0,p);c.error(b),i(b);return}}catch(p){if(p instanceof v){c.error(p),i(p);return}}},u=new TextDecoder;return new ReadableStream({start(d){let c="";return g();async function g(){if(a?.aborted){const f=new v("cancelled","Request was cancelled");return d.error(f),i(f),Promise.resolve()}try{const{value:f,done:p}=await s.read();if(p){c.trim()&&o(c.trim(),d),d.close();return}if(a?.aborted){const l=new v("cancelled","Request was cancelled");d.error(l),i(l),await s.cancel();return}c+=u.decode(f,{stream:!0});const b=c.split(`
`);c=b.pop()||"";for(const l of b)l.trim()&&o(l.trim(),d);return g()}catch(f){const p=f instanceof v?f:B(0,null);d.error(p),i(p)}}},cancel(){return s.cancel()}})}const Te="@firebase/functions",Ce="0.13.1";const $t="auth-internal",Gt="app-check-internal",Ht="messaging-internal";function Bt(s){const n=(i,{instanceIdentifier:a})=>{const o=i.getProvider("app").getImmediate(),u=i.getProvider($t),d=i.getProvider(Ht),c=i.getProvider(Gt);return new It(o,u,d,c,a)};lt(new ot(ee,n,"PUBLIC").setMultipleInstances(!0)),je(Te,Ce,s),je(Te,Ce,"esm2020")}function Wt(s=dt(),n=Q){const a=ut(Z(s),ee).getImmediate({identifier:n}),o=ht("functions");return o&&qt(a,...o),a}function qt(s,n,i){Dt(Z(s),n,i)}function Jt(s,n,i){return Lt(Z(s),n)}Bt();class N{platform;url;id;constructor(n){this.platform=n.platform,this.url=n.url,this.id=n.id}}ft.createRoot(document.getElementById("root")).render(e.jsx(m.StrictMode,{children:e.jsx(Vt,{})}));class Ee{url;file;id;constructor(n){this.url=n.url,this.file=n.file,this.id=n.id}}function Vt(){const[s,n]=m.useState([]),[i,a]=m.useState(!1),[o,u]=m.useState(!1),[d,c]=m.useState(new N({platform:"",url:""})),[g,f]=m.useState(null),[p,b]=m.useState(null),[l,y]=m.useState(null),[w,te]=m.useState(""),[se,ne]=m.useState(""),[A,ie]=m.useState(null),[Fe,O]=m.useState(!1),[ae,re]=m.useState(!1),[I,W]=m.useState([]),[Re,q]=m.useState(!1),[le,oe]=m.useState(!1),[D,Oe]=m.useState([]),[ce,Me]=m.useState(0),[de,_e]=m.useState(0),[ue,J]=m.useState(!1),[V,M]=m.useState(null),[z,he]=m.useState(new Set),[me,pe]=m.useState(""),[k,_]=m.useState([]),[Ue,ge]=m.useState(!1),[fe,be]=m.useState(!1),[j,X]=m.useState(new S({title:"",description:""})),[xe,U]=m.useState(null),[E,L]=m.useState(null),[$e,$]=m.useState(!1),[ve,ye]=m.useState(!1);m.useEffect(()=>{bt(t=>{}),xt().then(t=>{y(t),he(new Set),te(t.landingPageTitle),ne(t.landingPageSubtitle),ie(t.landingPagePhoto.url);const r=t.galleryPhotos.map(x=>new Ee({url:x.url,id:x.id}));W(r);const h=t.socialMediaLinks.map((x,T)=>new N({platform:x.platform,url:x.url,id:T.toString()}));n(h),pe(t.aboutSubtitle||""),_((t.aboutTiles||[]).map(x=>new S({title:x.title,description:x.description})))}),vt().then(t=>{Oe(t)})},[]);const Ge=t=>{pe(t),ge(!0)},He=async()=>{l&&(be(!0),l.aboutSubtitle=me,await F(l),ge(!1),be(!1),y(R.fromMap(l.toMap())))},Be=()=>{!j.title.trim()||!j.description.trim()||(_([...k,new S({title:j.title,description:j.description})]),X(new S({title:"",description:""})),$(!0))},We=t=>{U(t),L(new S({...k[t]}))},Se=(t,r)=>{E&&L(new S({...E,[t]:r}))},qe=t=>{if(!E)return;const r=[...k];r[t]=new S({...E}),_(r),U(null),L(null),$(!0)},Je=()=>{U(null),L(null)},Ve=t=>{_(k.filter((r,h)=>h!==t)),$(!0),xe===t&&(U(null),L(null))},ze=async()=>{l&&(ye(!0),l.aboutTiles=k,await F(l),$(!1),ye(!1),y(R.fromMap(l.toMap())))},Xe=async()=>{if(re(!0),l.landingPageTitle=w,l.landingPageSubtitle=se,A&&typeof A!="string"){await we(l.landingPagePhoto);const t=await Ae(A,"Landing Page Background");l.landingPagePhoto=t}await F(l),O(!1),re(!1),y(R.fromMap(l.toMap()))},Ye=async t=>{W([...I,new Ee({file:t})]),q(!0)},Ke=t=>{const r=I.filter(h=>h.file?h.file!==t:h.url!==t);W(r),q(!0)},Qe=async()=>{oe(!0);const t=[];for(const r of I)if(r.file){const h=await Ae(r.file,`Gallery Photo ${Date.now()}`);t.push(h)}else r.url&&t.push(new yt({url:r.url,id:r.id}));for(const r of l.galleryPhotos)t.find(x=>x.id===r.id)||await we(r);l.galleryPhotos=t,await F(l),q(!1),oe(!1),y(R.fromMap(l.toMap()))},Ze=()=>{!d.platform.trim()||!d.url.trim()||(n([...s,new N({platform:d.platform,url:d.url})]),c(new N({platform:"",url:""})),a(!0))},et=t=>{f(t),b(new N({...s[t]}))},Ne=(t,r)=>{p&&b(new N({...p,[t]:r}))},tt=t=>{if(!p)return;const r=[...s];r[t]=new N({...p}),n(r),f(null),b(null),a(!0)},st=()=>{f(null),b(null)},nt=t=>{n(s.filter((r,h)=>h!==t)),a(!0),g===t&&(f(null),b(null))},it=async()=>{u(!0),l.socialMediaLinks=s.map(t=>new St({platform:t.platform,url:t.url})),await F(l),a(!1),u(!1),y(R.fromMap(l.toMap()))},at=async()=>{if(!(!l||D.length===0)){J(!0),M(null);try{const t=await Nt();if(t.length===0){M("No subscribers found."),J(!1);return}const r=D[ce],h=l.fundraisers[de],x=(C,G=150)=>{const Y=document.createElement("div");Y.innerHTML=C;const K=Y.textContent||Y.innerText||"";return K.length>G?K.substring(0,G)+"...":K},T={emails:t.join(","),title:"PRSM Allergy Monthly Newsletter",articleTitle:r.title,articlePreview:x(r.body),articleLink:`${window.location.origin}/Articles/detail.html?id=${r.id}`,events:l.events.filter((C,G)=>!z.has(G)).map(C=>({date:`${C.displayDate} • ${new Date("1970-01-01T"+C.time).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})}`,title:C.title,description:C.description})),fundraiserTitle:h?.name||"",fundraiserDescription:h?.description||"",fundraiserLink:h?.link||"#"},rt=Wt(jt);await Jt(rt,"sendNewsletter")(T),M("Newsletter sent successfully!")}catch(t){console.error("Error sending newsletter:",t),M("Failed to send newsletter. Please try again.")}J(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(wt,{isDashboardPage:!0}),l?e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"dashboard-section light",children:[e.jsxs("div",{className:"section-title",children:[e.jsx("h1",{children:"Hero Section"}),e.jsx("p",{children:"Edit the hero section of the main website"})]}),e.jsxs("div",{className:"section-content-horizontal",children:[e.jsxs("div",{className:"hero-inputs-side",children:[e.jsxs("div",{className:"section-item",children:[e.jsx("label",{htmlFor:"title",children:"Title: "}),e.jsx("input",{type:"text",id:"title",className:"input-light",value:w,onChange:t=>{te(t.target.value),O(!0)}})]}),e.jsxs("div",{className:"section-item",children:[e.jsx("label",{htmlFor:"subtitle",children:"Subtitle: "}),e.jsx("input",{type:"text",id:"subtitle",className:"input-light",value:se,onChange:t=>{ne(t.target.value),O(!0)}})]}),e.jsxs("div",{className:"section-item",children:[e.jsx("label",{htmlFor:"background-image",children:"Background Image: "}),e.jsx("input",{type:"file",id:"background-image",className:"input-light",onChange:t=>{t.target.files&&t.target.files[0]&&(ie(t.target.files[0]),O(!0))}})]}),Fe&&!ae&&e.jsx("button",{className:"btn-primary",onClick:Xe,children:"Save Changes"}),ae&&e.jsx("div",{className:"loader"})]}),e.jsxs("div",{className:"hero-preview-side",children:[e.jsx("label",{children:"Preview Image"}),e.jsx("div",{className:"hero-preview",children:A?typeof A=="string"?e.jsx("img",{src:A,alt:"Background Preview",className:"hero-preview-image"}):e.jsx("img",{src:URL.createObjectURL(A),alt:"Background Preview",className:"hero-preview-image"}):e.jsx("div",{className:"no-image",children:"No Image Selected"})})]})]})]}),e.jsxs("section",{className:"dashboard-section white",children:[e.jsxs("div",{className:"section-title",children:[e.jsx("h1",{children:"Gallery Photos"}),e.jsx("p",{children:"View, add, or delete gallery photos shown on the main website."})]}),e.jsxs("div",{className:"gallery-dashboard-content",children:[e.jsxs("div",{className:"gallery-dashboard-list",children:[I.length===0&&e.jsx("div",{children:"No gallery photos yet."}),I.map(t=>e.jsxs("div",{className:"gallery-dashboard-photo",children:[e.jsx("img",{src:t.url??URL.createObjectURL(t.file),alt:"Gallery",className:"gallery-dashboard-img"}),e.jsx("button",{className:"btn-danger",onClick:()=>Ke(t.file??t.url),children:"Delete"})]}))]}),e.jsxs("div",{className:"gallery-dashboard-upload",children:[e.jsx("label",{htmlFor:"gallery-upload",children:"Add Photo:"}),e.jsx("input",{type:"file",id:"gallery-upload",className:"input-light",onChange:t=>{t.target.files&&t.target.files[0]&&Ye(t.target.files[0])}})]}),Re&&!le&&e.jsx("button",{className:"btn-primary",onClick:Qe,children:"Save Changes"}),le&&e.jsx("div",{className:"loader"})]})]}),e.jsxs("section",{className:"dashboard-section light",children:[e.jsxs("div",{className:"section-title",children:[e.jsx("h1",{children:"About Section"}),e.jsx("p",{children:"Edit the about subtitle and about tiles shown on the main website."})]}),e.jsxs("div",{className:"section-content",children:[e.jsxs("div",{className:"section-item",style:{width:"100%",maxWidth:600},children:[e.jsx("label",{htmlFor:"about-subtitle",style:{minWidth:100},children:"Subtitle:"}),e.jsx("input",{type:"text",id:"about-subtitle",className:"input-light",value:me,onChange:t=>Ge(t.target.value),style:{flex:1}}),Ue&&!fe&&e.jsx("button",{className:"btn-primary",onClick:He,children:"Save"}),fe&&e.jsx("div",{className:"loader"})]}),e.jsxs("div",{style:{width:"100%",maxWidth:600,textAlign:"center"},children:[e.jsx("h3",{style:{margin:"1rem 0 0.5rem 0"},children:"About Tiles"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[k.length===0&&e.jsx("div",{children:"No about tiles yet."}),k.map((t,r)=>e.jsx("div",{className:"socials-dashboard-item",style:{alignItems:"flex-start"},children:xe===r?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"socials-dashboard-info",style:{flex:1,flexDirection:"column",gap:"0.5rem"},children:[e.jsx("input",{className:"input-light socials-input",type:"text",value:E?.title||"",placeholder:"Title",onChange:h=>Se("title",h.target.value)}),e.jsx("input",{className:"input-light socials-input",type:"text",value:E?.description||"",placeholder:"Description",onChange:h=>Se("description",h.target.value)})]}),e.jsxs("div",{className:"socials-dashboard-actions",children:[e.jsx("button",{className:"btn-primary",onClick:()=>qe(r),children:"Save"}),e.jsx("button",{className:"btn-danger",onClick:Je,children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"socials-dashboard-info",style:{flex:1,flexDirection:"column",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"",children:t.title}),e.jsx("label",{htmlFor:"",children:t.description})]}),e.jsxs("div",{className:"socials-dashboard-actions",children:[e.jsx("button",{className:"btn-primary",onClick:()=>We(r),children:"Edit"}),e.jsx("button",{className:"btn-danger",onClick:()=>Ve(r),children:"Delete"})]})]})},r))]}),e.jsxs("div",{className:"socials-dashboard-add",style:{marginTop:"1rem"},children:[e.jsx("input",{className:"input-light socials-input",type:"text",value:j.title,placeholder:"Title",onChange:t=>X(new S({...j,title:t.target.value}))}),e.jsx("input",{className:"input-light socials-input",type:"text",value:j.description,placeholder:"Description",onChange:t=>X(new S({...j,description:t.target.value}))}),e.jsx("button",{className:"btn-primary",onClick:Be,children:"Add"})]}),$e&&!ve&&e.jsx("button",{className:"btn-primary",style:{marginTop:"1rem"},onClick:ze,children:"Save Changes"}),ve&&e.jsx("div",{className:"loader"})]})]})]}),e.jsxs("section",{className:"dashboard-section light",children:[e.jsxs("div",{className:"section-title",children:[e.jsx("h1",{children:"Social Media Links"}),e.jsx("p",{children:"View, add, edit, or delete social media links shown on the main website."})]}),e.jsxs("div",{className:"socials-dashboard-content",children:[e.jsxs("div",{className:"socials-dashboard-list",children:[s.length===0&&e.jsx("div",{children:"No social media links yet."}),s.map((t,r)=>e.jsx("div",{className:"socials-dashboard-item",children:g===r?e.jsxs(e.Fragment,{children:[e.jsx("input",{className:"input-light socials-input",type:"text",value:p?.platform||"",placeholder:"Platform",onChange:h=>Ne("platform",h.target.value)}),e.jsx("input",{className:"input-light socials-input",type:"text",value:p?.url||"",placeholder:"URL",onChange:h=>Ne("url",h.target.value)}),e.jsx("button",{className:"btn-primary",onClick:()=>tt(r),children:"Save"}),e.jsx("button",{className:"btn-danger",onClick:st,children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"socials-dashboard-info",children:[e.jsx("label",{htmlFor:"",children:t.platform}),e.jsx("label",{htmlFor:"",children:t.url})]}),e.jsxs("div",{className:"socials-dashboard-actions",children:[e.jsx("button",{className:"btn-primary",onClick:()=>et(r),children:"Edit"}),e.jsx("button",{className:"btn-danger",onClick:()=>nt(r),children:"Delete"})]})]})},r))]}),e.jsxs("div",{className:"socials-dashboard-add",children:[e.jsx("input",{className:"input-light socials-input",type:"text",value:d.platform,placeholder:"Platform",onChange:t=>c(new N({...d,platform:t.target.value}))}),e.jsx("input",{className:"input-light socials-input",type:"text",value:d.url,placeholder:"URL",onChange:t=>c(new N({...d,url:t.target.value}))}),e.jsx("button",{className:"btn-primary",onClick:Ze,children:"Add"})]}),i&&!o&&e.jsx("button",{className:"btn-primary",onClick:it,children:"Save Changes"}),o&&e.jsx("div",{className:"loader"})]})]}),e.jsxs("section",{className:"dashboard-section white",children:[e.jsxs("div",{className:"section-title",children:[e.jsx("h1",{children:"Send Newsletter"}),e.jsx("p",{children:"Send a newsletter email to all subscribers with a featured article, upcoming events, and a fundraiser."})]}),e.jsx("div",{className:"socials-dashboard-content",children:e.jsxs("div",{style:{width:"100%",maxWidth:600},children:[e.jsxs("div",{className:"section-item",style:{marginBottom:"1.5rem"},children:[e.jsx("label",{htmlFor:"newsletter-article",style:{minWidth:120},children:"Article:"}),e.jsxs("select",{id:"newsletter-article",className:"input-light",style:{flex:1},value:ce,onChange:t=>Me(Number(t.target.value)),children:[D.length===0&&e.jsx("option",{children:"No articles available"}),D.map((t,r)=>e.jsx("option",{value:r,children:t.title},t.id))]})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("label",{style:{fontWeight:600},children:["Events (",l.events.length-z.size,"/",l.events.length,"):"]}),e.jsxs("div",{style:{marginTop:"0.5rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[l.events.length===0&&e.jsx("p",{style:{color:"#888"},children:"No events to include."}),l.events.map((t,r)=>{const h=z.has(r);return e.jsxs("div",{style:{background:h?"#f0f0f0":"#f6fbfd",borderRadius:8,padding:"0.75rem 1rem",borderLeft:`3px solid ${h?"#ccc":"#008080"}`,opacity:h?.5:1,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:t.title}),e.jsx("br",{}),e.jsxs("span",{style:{fontSize:"0.85rem",color:"#555"},children:[t.displayDate," • ",t.time]})]}),e.jsx("button",{onClick:()=>{he(x=>{const T=new Set(x);return h?T.delete(r):T.add(r),T})},style:{background:h?"#008080":"transparent",color:h?"#fff":"#e74c3c",border:h?"none":"1px solid #e74c3c",borderRadius:6,padding:"0.3rem 0.7rem",cursor:"pointer",fontSize:"0.8rem",fontWeight:600,whiteSpace:"nowrap",marginLeft:"0.75rem"},children:h?"Include":"Remove"})]},r)})]})]}),e.jsxs("div",{className:"section-item",style:{marginBottom:"1.5rem"},children:[e.jsx("label",{htmlFor:"newsletter-fundraiser",style:{minWidth:120},children:"Fundraiser:"}),e.jsxs("select",{id:"newsletter-fundraiser",className:"input-light",style:{flex:1},value:de,onChange:t=>_e(Number(t.target.value)),children:[l.fundraisers.length===0&&e.jsx("option",{children:"No fundraisers available"}),l.fundraisers.map((t,r)=>e.jsx("option",{value:r,children:t.name},r))]})]}),!ue&&e.jsx("button",{className:"btn-primary",onClick:at,disabled:D.length===0,style:{width:"100%",padding:"0.75rem",fontSize:"1rem"},children:"Send Newsletter"}),ue&&e.jsx("div",{className:"loader"}),V&&e.jsx("p",{style:{marginTop:"1rem",textAlign:"center",color:V.includes("success")?"#008080":"#e74c3c",fontWeight:600},children:V})]})})]})]}):e.jsx("div",{className:"loader-container",children:e.jsx("div",{className:"loader"})})]})}
