import{c as I,j as e,r as l,i as M,h as y,k as f,m as T,n as H,o as L}from"./auth-DGWyFIKM.js";import{H as k}from"./header-DtqvAvu1.js";I.createRoot(document.getElementById("root")).render(e.jsx(l.StrictMode,{children:e.jsx(B,{})}));class o{id;title;body;constructor(r){this.id=r.id,this.title=r.title,this.body=r.body}}function A({value:d,onChange:r}){const a=l.useRef(null);l.useEffect(()=>{a.current&&a.current.innerHTML!==d&&(a.current.innerHTML=d)},[]);const b=()=>{a.current&&r(a.current.innerHTML)},u=(n,s)=>{document.execCommand(n,!1,s),a.current?.focus(),b()};return e.jsxs("div",{children:[e.jsxs("div",{className:"rich-text-toolbar",children:[e.jsx("button",{type:"button",onMouseDown:n=>{n.preventDefault(),u("bold")},title:"Bold",children:e.jsx("b",{children:"B"})}),e.jsx("button",{type:"button",onMouseDown:n=>{n.preventDefault(),u("italic")},title:"Italic",children:e.jsx("i",{children:"I"})}),e.jsx("button",{type:"button",onMouseDown:n=>{n.preventDefault(),u("underline")},title:"Underline",children:e.jsx("u",{children:"U"})}),e.jsxs("select",{onChange:n=>{u("fontSize",n.target.value)},defaultValue:"3",title:"Font Size",children:[e.jsx("option",{value:"1",children:"Small"}),e.jsx("option",{value:"3",children:"Normal"}),e.jsx("option",{value:"5",children:"Large"}),e.jsx("option",{value:"7",children:"Huge"})]})]}),e.jsx("div",{ref:a,className:"rich-text-editor",contentEditable:!0,onInput:b})]})}function B(){const[d,r]=l.useState([]),[a,b]=l.useState(!0),[u,n]=l.useState(!1),[s,p]=l.useState(new o({title:"",body:""})),[h,g]=l.useState(null),[c,x]=l.useState(null);l.useEffect(()=>{M(()=>{}),y().then(t=>{r(t),b(!1)})},[]);const v=async()=>{const t=await y();r(t)},N=async()=>{if(!s.title.trim()||!s.body.trim())return;n(!0);const t=new Date().toISOString(),i=new f({id:"",title:s.title,body:s.body,createdAt:t,updatedAt:t});await T(i),await v(),p(new o({title:"",body:""})),n(!1)},w=t=>{g(t.id),x(new o({id:t.id,title:t.title,body:t.body}))},C=async()=>{if(!c||!h)return;n(!0);const t=new Date().toISOString(),i=d.find(m=>m.id===h),j=new f({id:h,title:c.title,body:c.body,createdAt:i?.createdAt||t,updatedAt:t});await H(h,j),await v(),g(null),x(null),n(!1)},S=async t=>{n(!0),await L(t),await v(),h===t&&(g(null),x(null)),n(!1)},E=()=>{g(null),x(null)},D=(t,i=120)=>{const j=document.createElement("div");j.innerHTML=t;const m=j.textContent||j.innerText||"";return m.length>i?m.substring(0,i)+"...":m};return e.jsxs(e.Fragment,{children:[e.jsx(k,{isDashboardArticlesPage:!0}),a?e.jsx("div",{className:"loader-container",children:e.jsx("div",{className:"loader"})}):e.jsxs("section",{className:"dashboard-section light",children:[e.jsxs("div",{className:"section-title",children:[e.jsx("h1",{children:"Articles"}),e.jsx("p",{children:"Create, edit, and manage articles."})]}),e.jsxs("div",{className:"articles-dashboard-content",children:[e.jsxs("div",{className:"articles-dashboard-list",children:[d.length===0&&e.jsx("div",{style:{textAlign:"center"},children:"No articles yet."}),d.map(t=>e.jsx("div",{className:"articles-dashboard-item",children:h===t.id?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"article-form-group",children:[e.jsx("label",{children:"Title:"}),e.jsx("input",{type:"text",className:"input-light",value:c?.title||"",onChange:i=>x(new o({...c,title:i.target.value}))})]}),e.jsxs("div",{className:"article-form-group",children:[e.jsx("label",{children:"Body:"}),e.jsx(A,{value:c?.body||"",onChange:i=>x(new o({...c,body:i}))},`edit-${t.id}`)]}),e.jsxs("div",{className:"articles-dashboard-actions",children:[e.jsx("button",{className:"btn-primary",onClick:C,children:"Save"}),e.jsx("button",{className:"btn-danger",onClick:E,children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"articles-dashboard-item-preview",children:e.jsxs("div",{className:"articles-dashboard-item-info",children:[e.jsx("h4",{children:t.title}),e.jsx("p",{style:{color:"#0A6C95",fontWeight:600},children:t.getDisplayDate()}),e.jsx("p",{children:D(t.body)})]})}),e.jsxs("div",{className:"articles-dashboard-actions",children:[e.jsx("button",{className:"btn-primary",onClick:()=>w(t),children:"Edit"}),e.jsx("button",{className:"btn-danger",onClick:()=>S(t.id),children:"Delete"})]})]})},t.id))]}),e.jsxs("div",{className:"articles-dashboard-add",children:[e.jsx("h3",{style:{margin:"0 0 1rem 0"},children:"Create New Article"}),e.jsxs("div",{className:"article-form-group",children:[e.jsx("label",{children:"Title:"}),e.jsx("input",{type:"text",className:"input-light",placeholder:"Article title",value:s.title,onChange:t=>p(new o({...s,title:t.target.value}))})]}),e.jsxs("div",{className:"article-form-group",children:[e.jsx("label",{children:"Body:"}),e.jsx(A,{value:s.body,onChange:t=>p(new o({...s,body:t}))},"new-article")]}),e.jsx("button",{className:"btn-primary",onClick:N,children:"Add Article"})]}),u&&e.jsx("div",{className:"loader"})]})]})]})}
