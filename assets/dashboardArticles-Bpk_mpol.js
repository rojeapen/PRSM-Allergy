import{c as L,j as e,r as a,n as k,q as v,B as y,D as I,G as M,H}from"./auth-DAVARPO1.js";import{H as T}from"./header-BipK79Gw.js";L.createRoot(document.getElementById("root")).render(e.jsx(a.StrictMode,{children:e.jsx(B,{})}));class x{id;title;body;constructor(o){this.id=o.id,this.title=o.title,this.body=o.body}}function N({value:h,onChange:o}){const r=a.useRef(null);a.useEffect(()=>{r.current&&r.current.innerHTML!==h&&(r.current.innerHTML=h)},[]);const j=()=>{r.current&&o(r.current.innerHTML)},u=(n,s)=>{document.execCommand(n,!1,s),r.current?.focus(),j()};return e.jsxs("div",{children:[e.jsxs("div",{className:"rich-text-toolbar",children:[e.jsx("button",{type:"button",onMouseDown:n=>{n.preventDefault(),u("bold")},title:"Bold",children:e.jsx("b",{children:"B"})}),e.jsx("button",{type:"button",onMouseDown:n=>{n.preventDefault(),u("italic")},title:"Italic",children:e.jsx("i",{children:"I"})}),e.jsx("button",{type:"button",onMouseDown:n=>{n.preventDefault(),u("underline")},title:"Underline",children:e.jsx("u",{children:"U"})}),e.jsx("button",{type:"button",onMouseDown:n=>{n.preventDefault();const s=window.getSelection();if(s&&s.rangeCount>0&&s.anchorNode?.parentElement?.closest("a"))u("unlink");else{const c=prompt("Enter URL:");if(c){u("createLink",c);const d=window.getSelection();if(d&&d.anchorNode){const i=d.anchorNode.parentElement?.closest("a")||d.anchorNode.parentElement;i&&i.tagName==="A"&&(i.target="_blank",i.rel="noopener noreferrer")}j()}}},title:"Insert Link",children:"ðŸ”—"}),e.jsxs("select",{onChange:n=>{u("fontSize",n.target.value)},defaultValue:"3",title:"Font Size",children:[e.jsx("option",{value:"1",children:"Small"}),e.jsx("option",{value:"3",children:"Normal"}),e.jsx("option",{value:"5",children:"Large"}),e.jsx("option",{value:"7",children:"Huge"})]})]}),e.jsx("div",{ref:r,className:"rich-text-editor",contentEditable:!0,onInput:j})]})}function B(){const[h,o]=a.useState([]),[r,j]=a.useState(!0),[u,n]=a.useState(!1),[s,p]=a.useState(new x({title:"",body:""})),[c,d]=a.useState(null),[i,m]=a.useState(null);a.useEffect(()=>{k(()=>{}),v().then(t=>{o(t),j(!1)})},[]);const f=async()=>{const t=await v();o(t)},w=async()=>{if(!s.title.trim()||!s.body.trim())return;n(!0);const t=new Date().toISOString(),l=new y({id:"",title:s.title,body:s.body,createdAt:t,updatedAt:t});await I(l),await f(),p(new x({title:"",body:""})),n(!1)},A=t=>{d(t.id),m(new x({id:t.id,title:t.title,body:t.body}))},E=async()=>{if(!i||!c)return;n(!0);const t=new Date().toISOString(),l=h.find(g=>g.id===c),b=new y({id:c,title:i.title,body:i.body,createdAt:l?.createdAt||t,updatedAt:t});await M(c,b),await f(),d(null),m(null),n(!1)},S=async t=>{n(!0),await H(t),await f(),c===t&&(d(null),m(null)),n(!1)},C=()=>{d(null),m(null)},D=(t,l=120)=>{const b=document.createElement("div");b.innerHTML=t;const g=b.textContent||b.innerText||"";return g.length>l?g.substring(0,l)+"...":g};return e.jsxs(e.Fragment,{children:[e.jsx(T,{isDashboardArticlesPage:!0}),r?e.jsx("div",{className:"loader-container",children:e.jsx("div",{className:"loader"})}):e.jsxs("section",{className:"dashboard-section light",children:[e.jsxs("div",{className:"section-title",children:[e.jsx("h1",{children:"Articles"}),e.jsx("p",{children:"Create, edit, and manage articles."})]}),e.jsxs("div",{className:"articles-dashboard-content",children:[e.jsxs("div",{className:"articles-dashboard-list",children:[h.length===0&&e.jsx("div",{style:{textAlign:"center"},children:"No articles yet."}),h.map(t=>e.jsx("div",{className:"articles-dashboard-item",children:c===t.id?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"article-form-group",children:[e.jsx("label",{children:"Title:"}),e.jsx("input",{type:"text",className:"input-light",value:i?.title||"",onChange:l=>m(new x({...i,title:l.target.value}))})]}),e.jsxs("div",{className:"article-form-group",children:[e.jsx("label",{children:"Body:"}),e.jsx(N,{value:i?.body||"",onChange:l=>m(new x({...i,body:l}))},`edit-${t.id}`)]}),e.jsxs("div",{className:"articles-dashboard-actions",children:[e.jsx("button",{className:"btn-primary",onClick:E,children:"Save"}),e.jsx("button",{className:"btn-danger",onClick:C,children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"articles-dashboard-item-preview",children:e.jsxs("div",{className:"articles-dashboard-item-info",children:[e.jsx("h4",{children:t.title}),e.jsx("p",{style:{color:"#0A6C95",fontWeight:600},children:t.getDisplayDate()}),e.jsx("p",{children:D(t.body)})]})}),e.jsxs("div",{className:"articles-dashboard-actions",children:[e.jsx("button",{className:"btn-primary",onClick:()=>A(t),children:"Edit"}),e.jsx("button",{className:"btn-danger",onClick:()=>S(t.id),children:"Delete"})]})]})},t.id))]}),e.jsxs("div",{className:"articles-dashboard-add",children:[e.jsx("h3",{style:{margin:"0 0 1rem 0"},children:"Create New Article"}),e.jsxs("div",{className:"article-form-group",children:[e.jsx("label",{children:"Title:"}),e.jsx("input",{type:"text",className:"input-light",placeholder:"Article title",value:s.title,onChange:t=>p(new x({...s,title:t.target.value}))})]}),e.jsxs("div",{className:"article-form-group",children:[e.jsx("label",{children:"Body:"}),e.jsx(N,{value:s.body,onChange:t=>p(new x({...s,body:t}))},"new-article")]}),e.jsx("button",{className:"btn-primary",onClick:w,children:"Add Article"})]}),u&&e.jsx("div",{className:"loader"})]})]})]})}
