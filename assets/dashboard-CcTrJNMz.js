import{_ as at,C as rt,b as Se,d as lt,e as ot,f as ct,h as K,i as dt,k as Ce,p as ut,u as ht,m as mt,c as pt,j as e,r as h,A as S,n as gt,o as ft,q as bt,t as L,P as F,v as Ne,w as je,x as xt,S as vt,y as yt,z as St}from"./auth-DAVARPO1.js";import{H as Nt}from"./header-BipK79Gw.js";const jt="type.googleapis.com/google.protobuf.Int64Value",wt="type.googleapis.com/google.protobuf.UInt64Value";function Ee(s,n){const i={};for(const a in s)s.hasOwnProperty(a)&&(i[a]=n(s[a]));return i}function $(s){if(s==null)return null;if(s instanceof Number&&(s=s.valueOf()),typeof s=="number"&&isFinite(s)||s===!0||s===!1||Object.prototype.toString.call(s)==="[object String]")return s;if(s instanceof Date)return s.toISOString();if(Array.isArray(s))return s.map(n=>$(n));if(typeof s=="function"||typeof s=="object")return Ee(s,n=>$(n));throw new Error("Data cannot be encoded in JSON: "+s)}function E(s){if(s==null)return s;if(s["@type"])switch(s["@type"]){case jt:case wt:{const n=Number(s.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+s);return n}default:throw new Error("Data cannot be decoded from JSON: "+s)}return Array.isArray(s)?s.map(n=>E(n)):typeof s=="function"||typeof s=="object"?Ee(s,n=>E(n)):s}const Q="functions";const we={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class x extends mt{constructor(n,i,a){super(`${Q}/${n}`,i||""),this.details=a,Object.setPrototypeOf(this,x.prototype)}}function At(s){if(s>=200&&s<300)return"ok";switch(s){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function G(s,n){let i=At(s),a=i,o;try{const u=n&&n.error;if(u){const d=u.status;if(typeof d=="string"){if(!we[d])return new x("internal","internal");i=we[d],a=d}const c=u.message;typeof c=="string"&&(a=c),o=u.details,o!==void 0&&(o=E(o))}}catch{}return i==="ok"?null:new x(i,a,o)}class Tt{constructor(n,i,a,o){this.app=n,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,lt(n)&&n.settings.appCheckToken&&(this.serverAppAppCheckToken=n.settings.appCheckToken),this.auth=i.getImmediate({optional:!0}),this.messaging=a.getImmediate({optional:!0}),this.auth||i.get().then(u=>this.auth=u,()=>{}),this.messaging||a.get().then(u=>this.messaging=u,()=>{}),this.appCheck||o?.get().then(u=>this.appCheck=u,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(n){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const i=n?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return i.error?null:i.token}return null}async getContext(n){const i=await this.getAuthToken(),a=await this.getMessagingToken(),o=await this.getAppCheckToken(n);return{authToken:i,messagingToken:a,appCheckToken:o}}}const Y="us-central1",kt=/^data: (.*?)(?:\n|$)/;function Ct(s){let n=null;return{promise:new Promise((i,a)=>{n=setTimeout(()=>{a(new x("deadline-exceeded","deadline-exceeded"))},s)}),cancel:()=>{n&&clearTimeout(n)}}}class Et{constructor(n,i,a,o,u=Y,d=(...c)=>fetch(...c)){this.app=n,this.fetchImpl=d,this.emulatorOrigin=null,this.contextProvider=new Tt(n,i,a,o),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(u);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=Y}catch{this.customDomain=null,this.region=u}}_delete(){return this.deleteService()}_url(n){const i=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${i}/${this.region}/${n}`:this.customDomain!==null?`${this.customDomain}/${n}`:`https://${this.region}-${i}.cloudfunctions.net/${n}`}}function Pt(s,n,i){const a=Ce(n);s.emulatorOrigin=`http${a?"s":""}://${n}:${i}`,a&&(ut(s.emulatorOrigin+"/backends"),ht("Functions",!0))}function Dt(s,n,i){const a=o=>Lt(s,n,o,{});return a.stream=(o,u)=>Rt(s,n,o,u),a}function Pe(s){return s.emulatorOrigin&&Ce(s.emulatorOrigin)?"include":void 0}async function It(s,n,i,a,o){i["Content-Type"]="application/json";let u;try{u=await a(s,{method:"POST",body:JSON.stringify(n),headers:i,credentials:Pe(o)})}catch{return{status:0,json:null}}let d=null;try{d=await u.json()}catch{}return{status:u.status,json:d}}async function De(s,n){const i={},a=await s.contextProvider.getContext(n.limitedUseAppCheckTokens);return a.authToken&&(i.Authorization="Bearer "+a.authToken),a.messagingToken&&(i["Firebase-Instance-ID-Token"]=a.messagingToken),a.appCheckToken!==null&&(i["X-Firebase-AppCheck"]=a.appCheckToken),i}function Lt(s,n,i,a){const o=s._url(n);return Ft(s,o,i,a)}async function Ft(s,n,i,a){i=$(i);const o={data:i},u=await De(s,a),d=a.timeout||7e4,c=Ct(d),g=await Promise.race([It(n,o,u,s.fetchImpl,s),c.promise,s.cancelAllRequests]);if(c.cancel(),!g)throw new x("cancelled","Firebase Functions instance was deleted.");const f=G(g.status,g.json);if(f)throw f;if(!g.json)throw new x("internal","Response is not valid JSON object.");let m=g.json.data;if(typeof m>"u"&&(m=g.json.result),typeof m>"u")throw new x("internal","Response is missing data field.");return{data:E(m)}}function Rt(s,n,i,a){const o=s._url(n);return Ot(s,o,i,a||{})}async function Ot(s,n,i,a){i=$(i);const o={data:i},u=await De(s,a);u["Content-Type"]="application/json",u.Accept="text/event-stream";let d;try{d=await s.fetchImpl(n,{method:"POST",body:JSON.stringify(o),headers:u,signal:a?.signal,credentials:Pe(s)})}catch(l){if(l instanceof Error&&l.name==="AbortError"){const w=new x("cancelled","Request was cancelled.");return{data:Promise.reject(w),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(w)}}}}}}const v=G(0,null);return{data:Promise.reject(v),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(v)}}}}}}let c,g;const f=new Promise((l,v)=>{c=l,g=v});a?.signal?.addEventListener("abort",()=>{const l=new x("cancelled","Request was cancelled.");g(l)});const m=d.body.getReader(),b=Mt(m,c,g,a?.signal);return{stream:{[Symbol.asyncIterator](){const l=b.getReader();return{async next(){const{value:v,done:w}=await l.read();return{value:v,done:w}},async return(){return await l.cancel(),{done:!0,value:void 0}}}}},data:f}}function Mt(s,n,i,a){const o=(d,c)=>{const g=d.match(kt);if(!g)return;const f=g[1];try{const m=JSON.parse(f);if("result"in m){n(E(m.result));return}if("message"in m){c.enqueue(E(m.message));return}if("error"in m){const b=G(0,m);c.error(b),i(b);return}}catch(m){if(m instanceof x){c.error(m),i(m);return}}},u=new TextDecoder;return new ReadableStream({start(d){let c="";return g();async function g(){if(a?.aborted){const f=new x("cancelled","Request was cancelled");return d.error(f),i(f),Promise.resolve()}try{const{value:f,done:m}=await s.read();if(m){c.trim()&&o(c.trim(),d),d.close();return}if(a?.aborted){const l=new x("cancelled","Request was cancelled");d.error(l),i(l),await s.cancel();return}c+=u.decode(f,{stream:!0});const b=c.split(`
`);c=b.pop()||"";for(const l of b)l.trim()&&o(l.trim(),d);return g()}catch(f){const m=f instanceof x?f:G(0,null);d.error(m),i(m)}}},cancel(){return s.cancel()}})}const Ae="@firebase/functions",Te="0.13.1";const _t="auth-internal",Ut="app-check-internal",$t="messaging-internal";function Gt(s){const n=(i,{instanceIdentifier:a})=>{const o=i.getProvider("app").getImmediate(),u=i.getProvider(_t),d=i.getProvider($t),c=i.getProvider(Ut);return new Et(o,u,d,c,a)};at(new rt(Q,n,"PUBLIC").setMultipleInstances(!0)),Se(Ae,Te,s),Se(Ae,Te,"esm2020")}function Ht(s=ot(),n=Y){const a=ct(K(s),Q).getImmediate({identifier:n}),o=dt("functions");return o&&Bt(a,...o),a}function Bt(s,n,i){Pt(K(s),n,i)}function Wt(s,n,i){return Dt(K(s),n)}Gt();class N{platform;url;id;constructor(n){this.platform=n.platform,this.url=n.url,this.id=n.id}}pt.createRoot(document.getElementById("root")).render(e.jsx(h.StrictMode,{children:e.jsx(qt,{})}));class ke{url;file;id;constructor(n){this.url=n.url,this.file=n.file,this.id=n.id}}function qt(){const[s,n]=h.useState([]),[i,a]=h.useState(!1),[o,u]=h.useState(!1),[d,c]=h.useState(new N({platform:"",url:""})),[g,f]=h.useState(null),[m,b]=h.useState(null),[l,v]=h.useState(null),[w,Z]=h.useState(""),[ee,te]=h.useState(""),[A,se]=h.useState(null),[Ie,R]=h.useState(!1),[ne,ie]=h.useState(!1),[P,H]=h.useState([]),[Le,B]=h.useState(!1),[ae,re]=h.useState(!1),[D,Fe]=h.useState([]),[le,Re]=h.useState(0),[oe,Oe]=h.useState(0),[ce,W]=h.useState(!1),[q,O]=h.useState(null),[de,ue]=h.useState(""),[T,M]=h.useState([]),[Me,he]=h.useState(!1),[me,pe]=h.useState(!1),[j,J]=h.useState(new S({title:"",description:""})),[ge,_]=h.useState(null),[k,I]=h.useState(null),[_e,U]=h.useState(!1),[fe,be]=h.useState(!1);h.useEffect(()=>{gt(t=>{}),ft().then(t=>{v(t),Z(t.landingPageTitle),te(t.landingPageSubtitle),se(t.landingPagePhoto.url);const r=t.galleryPhotos.map(y=>new ke({url:y.url,id:y.id}));H(r);const p=t.socialMediaLinks.map((y,V)=>new N({platform:y.platform,url:y.url,id:V.toString()}));n(p),ue(t.aboutSubtitle||""),M((t.aboutTiles||[]).map(y=>new S({title:y.title,description:y.description})))}),bt().then(t=>{Fe(t)})},[]);const Ue=t=>{ue(t),he(!0)},$e=async()=>{l&&(pe(!0),l.aboutSubtitle=de,await L(l),he(!1),pe(!1),v(F.fromMap(l.toMap())))},Ge=()=>{!j.title.trim()||!j.description.trim()||(M([...T,new S({title:j.title,description:j.description})]),J(new S({title:"",description:""})),U(!0))},He=t=>{_(t),I(new S({...T[t]}))},xe=(t,r)=>{k&&I(new S({...k,[t]:r}))},Be=t=>{if(!k)return;const r=[...T];r[t]=new S({...k}),M(r),_(null),I(null),U(!0)},We=()=>{_(null),I(null)},qe=t=>{M(T.filter((r,p)=>p!==t)),U(!0),ge===t&&(_(null),I(null))},Je=async()=>{l&&(be(!0),l.aboutTiles=T,await L(l),U(!1),be(!1),v(F.fromMap(l.toMap())))},Ve=async()=>{if(ie(!0),l.landingPageTitle=w,l.landingPageSubtitle=ee,A&&typeof A!="string"){await Ne(l.landingPagePhoto);const t=await je(A,"Landing Page Background");l.landingPagePhoto=t}await L(l),R(!1),ie(!1),v(F.fromMap(l.toMap()))},ze=async t=>{H([...P,new ke({file:t})]),B(!0)},Xe=t=>{const r=P.filter(p=>p.file?p.file!==t:p.url!==t);H(r),B(!0)},Ye=async()=>{re(!0);const t=[];for(const r of P)if(r.file){const p=await je(r.file,`Gallery Photo ${Date.now()}`);t.push(p)}else r.url&&t.push(new xt({url:r.url,id:r.id}));for(const r of l.galleryPhotos)t.find(y=>y.id===r.id)||await Ne(r);l.galleryPhotos=t,await L(l),B(!1),re(!1),v(F.fromMap(l.toMap()))},Ke=()=>{!d.platform.trim()||!d.url.trim()||(n([...s,new N({platform:d.platform,url:d.url})]),c(new N({platform:"",url:""})),a(!0))},Qe=t=>{f(t),b(new N({...s[t]}))},ve=(t,r)=>{m&&b(new N({...m,[t]:r}))},Ze=t=>{if(!m)return;const r=[...s];r[t]=new N({...m}),n(r),f(null),b(null),a(!0)},et=()=>{f(null),b(null)},tt=t=>{n(s.filter((r,p)=>p!==t)),a(!0),g===t&&(f(null),b(null))},st=async()=>{u(!0),l.socialMediaLinks=s.map(t=>new vt({platform:t.platform,url:t.url})),await L(l),a(!1),u(!1),v(F.fromMap(l.toMap()))},nt=async()=>{if(!(!l||D.length===0)){W(!0),O(null);try{const t=await yt();if(t.length===0){O("No subscribers found."),W(!1);return}const r=D[le],p=l.fundraisers[oe],y=(C,ye=150)=>{const z=document.createElement("div");z.innerHTML=C;const X=z.textContent||z.innerText||"";return X.length>ye?X.substring(0,ye)+"...":X},V={emails:t.join(","),title:"PRSM Allergy Monthly Newsletter",articleTitle:r.title,articlePreview:y(r.body),articleLink:`${window.location.origin}/PRSM-Allergy/Articles/detail.html?id=${r.id}`,events:l.events.map(C=>({date:`${C.displayDate} • ${new Date("1970-01-01T"+C.time).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})}`,title:C.title,description:C.description})),fundraiserTitle:p?.name||"",fundraiserDescription:p?.description||"",fundraiserLink:p?.link||"#"},it=Ht(St);await Wt(it,"sendNewsletter")(V),O("Newsletter sent successfully!")}catch(t){console.error("Error sending newsletter:",t),O("Failed to send newsletter. Please try again.")}W(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(Nt,{isDashboardPage:!0}),l?e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"dashboard-section light",children:[e.jsxs("div",{className:"section-title",children:[e.jsx("h1",{children:"Hero Section"}),e.jsx("p",{children:"Edit the hero section of the main website"})]}),e.jsxs("div",{className:"section-content-horizontal",children:[e.jsxs("div",{className:"hero-inputs-side",children:[e.jsxs("div",{className:"section-item",children:[e.jsx("label",{htmlFor:"title",children:"Title: "}),e.jsx("input",{type:"text",id:"title",className:"input-light",value:w,onChange:t=>{Z(t.target.value),R(!0)}})]}),e.jsxs("div",{className:"section-item",children:[e.jsx("label",{htmlFor:"subtitle",children:"Subtitle: "}),e.jsx("input",{type:"text",id:"subtitle",className:"input-light",value:ee,onChange:t=>{te(t.target.value),R(!0)}})]}),e.jsxs("div",{className:"section-item",children:[e.jsx("label",{htmlFor:"background-image",children:"Background Image: "}),e.jsx("input",{type:"file",id:"background-image",className:"input-light",onChange:t=>{t.target.files&&t.target.files[0]&&(se(t.target.files[0]),R(!0))}})]}),Ie&&!ne&&e.jsx("button",{className:"btn-primary",onClick:Ve,children:"Save Changes"}),ne&&e.jsx("div",{className:"loader"})]}),e.jsxs("div",{className:"hero-preview-side",children:[e.jsx("label",{children:"Preview Image"}),e.jsx("div",{className:"hero-preview",children:A?typeof A=="string"?e.jsx("img",{src:A,alt:"Background Preview",className:"hero-preview-image"}):e.jsx("img",{src:URL.createObjectURL(A),alt:"Background Preview",className:"hero-preview-image"}):e.jsx("div",{className:"no-image",children:"No Image Selected"})})]})]})]}),e.jsxs("section",{className:"dashboard-section white",children:[e.jsxs("div",{className:"section-title",children:[e.jsx("h1",{children:"Gallery Photos"}),e.jsx("p",{children:"View, add, or delete gallery photos shown on the main website."})]}),e.jsxs("div",{className:"gallery-dashboard-content",children:[e.jsxs("div",{className:"gallery-dashboard-list",children:[P.length===0&&e.jsx("div",{children:"No gallery photos yet."}),P.map(t=>e.jsxs("div",{className:"gallery-dashboard-photo",children:[e.jsx("img",{src:t.url??URL.createObjectURL(t.file),alt:"Gallery",className:"gallery-dashboard-img"}),e.jsx("button",{className:"btn-danger",onClick:()=>Xe(t.file??t.url),children:"Delete"})]}))]}),e.jsxs("div",{className:"gallery-dashboard-upload",children:[e.jsx("label",{htmlFor:"gallery-upload",children:"Add Photo:"}),e.jsx("input",{type:"file",id:"gallery-upload",className:"input-light",onChange:t=>{t.target.files&&t.target.files[0]&&ze(t.target.files[0])}})]}),Le&&!ae&&e.jsx("button",{className:"btn-primary",onClick:Ye,children:"Save Changes"}),ae&&e.jsx("div",{className:"loader"})]})]}),e.jsxs("section",{className:"dashboard-section light",children:[e.jsxs("div",{className:"section-title",children:[e.jsx("h1",{children:"About Section"}),e.jsx("p",{children:"Edit the about subtitle and about tiles shown on the main website."})]}),e.jsxs("div",{className:"section-content",children:[e.jsxs("div",{className:"section-item",style:{width:"100%",maxWidth:600},children:[e.jsx("label",{htmlFor:"about-subtitle",style:{minWidth:100},children:"Subtitle:"}),e.jsx("input",{type:"text",id:"about-subtitle",className:"input-light",value:de,onChange:t=>Ue(t.target.value),style:{flex:1}}),Me&&!me&&e.jsx("button",{className:"btn-primary",onClick:$e,children:"Save"}),me&&e.jsx("div",{className:"loader"})]}),e.jsxs("div",{style:{width:"100%",maxWidth:600,textAlign:"center"},children:[e.jsx("h3",{style:{margin:"1rem 0 0.5rem 0"},children:"About Tiles"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[T.length===0&&e.jsx("div",{children:"No about tiles yet."}),T.map((t,r)=>e.jsx("div",{className:"socials-dashboard-item",style:{alignItems:"flex-start"},children:ge===r?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"socials-dashboard-info",style:{flex:1,flexDirection:"column",gap:"0.5rem"},children:[e.jsx("input",{className:"input-light socials-input",type:"text",value:k?.title||"",placeholder:"Title",onChange:p=>xe("title",p.target.value)}),e.jsx("input",{className:"input-light socials-input",type:"text",value:k?.description||"",placeholder:"Description",onChange:p=>xe("description",p.target.value)})]}),e.jsxs("div",{className:"socials-dashboard-actions",children:[e.jsx("button",{className:"btn-primary",onClick:()=>Be(r),children:"Save"}),e.jsx("button",{className:"btn-danger",onClick:We,children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"socials-dashboard-info",style:{flex:1,flexDirection:"column",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"",children:t.title}),e.jsx("label",{htmlFor:"",children:t.description})]}),e.jsxs("div",{className:"socials-dashboard-actions",children:[e.jsx("button",{className:"btn-primary",onClick:()=>He(r),children:"Edit"}),e.jsx("button",{className:"btn-danger",onClick:()=>qe(r),children:"Delete"})]})]})},r))]}),e.jsxs("div",{className:"socials-dashboard-add",style:{marginTop:"1rem"},children:[e.jsx("input",{className:"input-light socials-input",type:"text",value:j.title,placeholder:"Title",onChange:t=>J(new S({...j,title:t.target.value}))}),e.jsx("input",{className:"input-light socials-input",type:"text",value:j.description,placeholder:"Description",onChange:t=>J(new S({...j,description:t.target.value}))}),e.jsx("button",{className:"btn-primary",onClick:Ge,children:"Add"})]}),_e&&!fe&&e.jsx("button",{className:"btn-primary",style:{marginTop:"1rem"},onClick:Je,children:"Save Changes"}),fe&&e.jsx("div",{className:"loader"})]})]})]}),e.jsxs("section",{className:"dashboard-section light",children:[e.jsxs("div",{className:"section-title",children:[e.jsx("h1",{children:"Social Media Links"}),e.jsx("p",{children:"View, add, edit, or delete social media links shown on the main website."})]}),e.jsxs("div",{className:"socials-dashboard-content",children:[e.jsxs("div",{className:"socials-dashboard-list",children:[s.length===0&&e.jsx("div",{children:"No social media links yet."}),s.map((t,r)=>e.jsx("div",{className:"socials-dashboard-item",children:g===r?e.jsxs(e.Fragment,{children:[e.jsx("input",{className:"input-light socials-input",type:"text",value:m?.platform||"",placeholder:"Platform",onChange:p=>ve("platform",p.target.value)}),e.jsx("input",{className:"input-light socials-input",type:"text",value:m?.url||"",placeholder:"URL",onChange:p=>ve("url",p.target.value)}),e.jsx("button",{className:"btn-primary",onClick:()=>Ze(r),children:"Save"}),e.jsx("button",{className:"btn-danger",onClick:et,children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"socials-dashboard-info",children:[e.jsx("label",{htmlFor:"",children:t.platform}),e.jsx("label",{htmlFor:"",children:t.url})]}),e.jsxs("div",{className:"socials-dashboard-actions",children:[e.jsx("button",{className:"btn-primary",onClick:()=>Qe(r),children:"Edit"}),e.jsx("button",{className:"btn-danger",onClick:()=>tt(r),children:"Delete"})]})]})},r))]}),e.jsxs("div",{className:"socials-dashboard-add",children:[e.jsx("input",{className:"input-light socials-input",type:"text",value:d.platform,placeholder:"Platform",onChange:t=>c(new N({...d,platform:t.target.value}))}),e.jsx("input",{className:"input-light socials-input",type:"text",value:d.url,placeholder:"URL",onChange:t=>c(new N({...d,url:t.target.value}))}),e.jsx("button",{className:"btn-primary",onClick:Ke,children:"Add"})]}),i&&!o&&e.jsx("button",{className:"btn-primary",onClick:st,children:"Save Changes"}),o&&e.jsx("div",{className:"loader"})]})]}),e.jsxs("section",{className:"dashboard-section white",children:[e.jsxs("div",{className:"section-title",children:[e.jsx("h1",{children:"Send Newsletter"}),e.jsx("p",{children:"Send a newsletter email to all subscribers with a featured article, upcoming events, and a fundraiser."})]}),e.jsx("div",{className:"socials-dashboard-content",children:e.jsxs("div",{style:{width:"100%",maxWidth:600},children:[e.jsxs("div",{className:"section-item",style:{marginBottom:"1.5rem"},children:[e.jsx("label",{htmlFor:"newsletter-article",style:{minWidth:120},children:"Article:"}),e.jsxs("select",{id:"newsletter-article",className:"input-light",style:{flex:1},value:le,onChange:t=>Re(Number(t.target.value)),children:[D.length===0&&e.jsx("option",{children:"No articles available"}),D.map((t,r)=>e.jsx("option",{value:r,children:t.title},t.id))]})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("label",{style:{fontWeight:600},children:["Events (",l.events.length,"):"]}),e.jsxs("div",{style:{marginTop:"0.5rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[l.events.length===0&&e.jsx("p",{style:{color:"#888"},children:"No events to include."}),l.events.map((t,r)=>e.jsxs("div",{style:{background:"#f6fbfd",borderRadius:8,padding:"0.75rem 1rem",borderLeft:"3px solid #008080"},children:[e.jsx("strong",{children:t.title}),e.jsx("br",{}),e.jsxs("span",{style:{fontSize:"0.85rem",color:"#555"},children:[t.displayDate," • ",t.time]})]},r))]})]}),e.jsxs("div",{className:"section-item",style:{marginBottom:"1.5rem"},children:[e.jsx("label",{htmlFor:"newsletter-fundraiser",style:{minWidth:120},children:"Fundraiser:"}),e.jsxs("select",{id:"newsletter-fundraiser",className:"input-light",style:{flex:1},value:oe,onChange:t=>Oe(Number(t.target.value)),children:[l.fundraisers.length===0&&e.jsx("option",{children:"No fundraisers available"}),l.fundraisers.map((t,r)=>e.jsx("option",{value:r,children:t.name},r))]})]}),!ce&&e.jsx("button",{className:"btn-primary",onClick:nt,disabled:D.length===0,style:{width:"100%",padding:"0.75rem",fontSize:"1rem"},children:"Send Newsletter"}),ce&&e.jsx("div",{className:"loader"}),q&&e.jsx("p",{style:{marginTop:"1rem",textAlign:"center",color:q.includes("success")?"#008080":"#e74c3c",fontWeight:600},children:q})]})})]})]}):e.jsx("div",{className:"loader-container",children:e.jsx("div",{className:"loader"})})]})}
